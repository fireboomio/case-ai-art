{"path":"operations/CreateOnePointRecord/customResolve","depend":null,"script":"import { HookRequestWithInput } from 'generated/fireboom.hooks'\nimport { InjectedCreateOnePointRecordInput, CreateOnePointRecordResponse } from 'generated/models'\n\nexport default async function customResolve(hook: HookRequestWithInput\u003cInjectedCreateOnePointRecordInput\u003e)\n  : Promise\u003cvoid | CreateOnePointRecordResponse\u003e {\n  // 根据用户查询今日分享次数，超出直接200返回\n  const now = new Date(Math.floor(Date.now() / 86400000) * 86400000)\n  const resp = await hook.internalClient.queries.GetMyPointRecords({\n    input: {\n      way: [hook.input.way],\n      userId: hook.input.userId,\n      timeStart: now.toISOString()\n    }\n  })\n  const limitTimes = {\n    ShareToFriend: 2,\n    ShareToGroup: 2,\n    WatchAD: 10\n  }[hook.input.way] ?? 0\n  const currentTimes = resp.data?.data?.length??0\n  if ((currentTimes \u003e= limitTimes) \u0026\u0026 limitTimes) {\n    return {\n      data:{}\n    }\n  }\n}","switch":true,"scriptType":"","input":null,"type":""}
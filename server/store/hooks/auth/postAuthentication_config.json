{"path":"auth/postAuthentication","depend":null,"script":"import { AuthenticationHookRequest } from 'fireboom-wundersdk/server'\n\nexport default async function postAuthentication(hook: AuthenticationHookRequest) : Promise\u003cvoid\u003e{\n  if (hook.user?.userId) {\n    const { provider, providerId, userId } = hook.user\n    const { nickname, picture } = hook.user.idToken!\n    const resp = await hook.internalClient.queries.FindOneAppUser({\n      input: {\n        providerUserId: userId,\n        providerId\n      }\n    })\n    const existedUser = resp?.data?.data\n    if (!existedUser) {\n      await hook.internalClient.mutations.CreateOneAppUser({\n        input: {\n          data: {\n            id: userId,\n            provider,\n            providerId,\n            nickname,\n            avatar: picture,\n            phone: '',\n            points: 100\n          }\n        }\n      })\n    }\n  }\n}","switch":true,"scriptType":"","input":null,"type":""}
